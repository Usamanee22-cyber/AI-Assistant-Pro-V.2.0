<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LANGE V.300 | NEURAL SYNTHESIS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code&family=Noto+Sans+Thai:wght@300;700;900&display=swap');
        :root { --accent: #3b82f6; --bg: #030303; }
        body { background: var(--bg); color: #e5e5e5; font-family: 'Noto Sans Thai', sans-serif; overflow: hidden; height: 100vh; }
        
        .monolith-bg { background: radial-gradient(circle at 50% 50%, #111 0%, #030303 100%); }
        .neural-card { background: rgba(20, 20, 20, 0.6); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.05); }
        
        /* Astral Star Animation */
        .star-box { font-size: 32px; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .processing { animation: pulse-spin 1.5s infinite linear; filter: drop-shadow(0 0 15px var(--accent)); }
        @keyframes pulse-spin { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.2); } 100% { transform: rotate(360deg) scale(1); } }

        .chat-stream::-webkit-scrollbar { width: 3px; }
        .chat-stream::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        
        .ai-bubble { border-left: 3px solid var(--accent); background: rgba(59, 130, 246, 0.05); }
        .trace-text { font-family: 'Fira Code', monospace; font-size: 10px; color: #555; }
    </style>
</head>
<body class="monolith-bg flex flex-col items-center justify-center p-4">

<div id="gate" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center text-center">
    <div class="mb-10">
        <h1 class="text-6xl font-black italic tracking-tighter text-white">LANGE <span class="text-blue-500">V.300</span></h1>
        <p class="text-[10px] tracking-[0.8em] text-gray-500 mt-2 uppercase">Internet Integrated Neural Engine</p>
    </div>
    <input type="text" id="adminIn" class="bg-transparent border-b-2 border-blue-900 p-4 text-3xl font-bold text-center outline-none text-white w-64 mb-8" placeholder="IDENTIFY">
    <button onclick="bootSystem()" class="bg-blue-600 hover:bg-blue-500 text-white px-12 py-3 rounded-full font-bold transition-all active:scale-95 shadow-2xl">SYNC NEURAL</button>
</div>

<div id="app" class="hidden w-full max-w-4xl h-[90vh] flex flex-col neural-card rounded-[40px] p-6 lg:p-10 shadow-2xl">
    
    <header class="flex justify-between items-center mb-6">
        <div class="flex items-center gap-3">
            <div class="w-2 h-2 bg-green-500 rounded-full shadow-[0_0_8px_#22c55e]"></div>
            <span class="text-[10px] font-bold text-gray-400 tracking-widest uppercase">Deep Learning Active</span>
        </div>
        <div id="astral" class="star-box">⭐</div>
    </header>

    <div id="chat-stream" class="flex-1 overflow-y-auto space-y-8 mb-6 pr-2 chat-stream">
        <div class="ai-bubble p-6 rounded-2xl">
            <p class="text-lg leading-relaxed">
                ระบบเชื่อมต่อกับ <span class="text-blue-500 font-bold">Big-Data-in-to-the-Internet</span> เรียบร้อยแล้วครับคุณโตนัส 
                วันนี้อยากให้ผมวิเคราะห์ข้อมูลอะไร หรือจะคุยเล่นกันดีอ่ะน้า? เย่!
            </p>
        </div>
    </div>

    <div id="trace-panel" class="mb-4 h-12 overflow-hidden opacity-50">
        <div id="trace-log" class="trace-text"></div>
    </div>

    <form onsubmit="processRequest(event)" class="relative">
        <input type="text" id="userInput" autocomplete="off"
            class="w-full bg-white/5 border border-white/10 p-6 pr-20 rounded-3xl outline-none focus:border-blue-500/50 transition-all text-white shadow-inner"
            placeholder="คุยกับ AI (ลองถามข่าว หรือคิดเลขยากๆ ดูครับ)...">
        <button class="absolute right-4 top-1/2 -translate-y-1/2 bg-blue-600 p-3 rounded-2xl hover:bg-blue-500 transition-all">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
        </button>
    </form>
</div>

<script>
// --- [ GLOBAL KNOWLEDGE & PERSONA ] ---
const INTERNAL_MEMORY = {
    greetings: ["สวัสดี", "หวัดดี", "ดีจ้า", "ดีครับ", "ดีจ๊ะ"],
    identity: ["ชื่ออะไร", "ใครสร้าง", "เป็นใคร"],
    style: { suffix: "อ่ะน้า", exclamation: "เย่!" }
};

function bootSystem() {
    if(document.getElementById('adminIn').value === "โตนัส") {
        document.getElementById('gate').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
    }
}

async function processRequest(e) {
    e.preventDefault();
    const input = document.getElementById('userInput').value.trim();
    if(!input) return;

    addChat(input, 'user');
    document.getElementById('userInput').value = "";
    
    // UI Feedback: Start Thinking
    const star = document.getElementById('astral');
    star.classList.add('processing');
    logTrace(`START_INFERENCE: "${input}"`);

    let finalResponse = "";

    // 1. NEURAL PREDICTION LAYER (ภาษาพูด & เจตนา)
    const isGreeting = INTERNAL_MEMORY.greetings.some(g => input.includes(g));
    const isIdentity = INTERNAL_MEMORY.identity.some(i => input.includes(i));

    if (isGreeting) {
        finalResponse = `สวัสดีครับคุณโตนัส มีอะไรให้ผมรับใช้ในระบบ Big Data วันนี้ไหมอ่ะน้า? ${INTERNAL_MEMORY.style.exclamation}`;
        logTrace("INTENT_MATCH: GREETING_PROC");
    } 
    else if (isIdentity) {
        finalResponse = `ผมคือ Lange Model V.300 ระบบ AI ที่คุณโตนัสสร้างขึ้นให้ฉลาดที่สุดในอินเทอร์เน็ตไงครับ!`;
        logTrace("INTENT_MATCH: IDENTITY_PROC");
    }

    // 2. DEEP LOGIC LAYER (Math & Algorithms)
    if (!finalResponse && /[0-9]/.test(input)) {
        try {
            logTrace("ML_CALC: EVALUATING_MATHEMATICAL_STRUCTURE");
            let mathQuery = input.replace(/ยกกำลัง/g, '**').replace(/x/g, '*');
            let result = eval(mathQuery.match(/[0-9\+\-\*\/\.\(\)\*\* ]+/g)[0]);
            finalResponse = `จากการประมวลผลผ่าน Deep Logic คำตอบคือ ${result} ครับ แม่นยำระดับ Supercomputer เลยอ่ะน้า!`;
        } catch(e) { logTrace("ML_CALC_ERROR: FALLBACK_TO_BIG_DATA"); }
    }

    // 3. BIG-DATA-IN-TO-THE-INTERNET LAYER (Global Search Scraper)
    if (!finalResponse) {
        logTrace("BIG_DATA_FETCH: ACCESSING_GLOBAL_INTERNET_NODES");
        try {
            // ดึงข้อมูลจริงจาก DuckDuckGo Zero-click API
            const response = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(input)}&format=json&no_html=1`);
            const data = await response.json();
            
            if (data.AbstractText) {
                finalResponse = data.AbstractText;
                logTrace("BIG_DATA_SUCCESS: DATA_SYNTHESIZED");
            } else if (data.RelatedTopics && data.RelatedTopics.length > 0) {
                finalResponse = `ผมพบข้อมูลที่เกี่ยวข้องดังนี้ครับ: ${data.RelatedTopics[0].Text}`;
                logTrace("BIG_DATA_SUCCESS: RELATED_CONTEXT_FOUND");
            } else {
                // ระบบตอบแบบแก้ตัวเผื่อไม่เข้าใจจริง [cite: 2026-01-21]
                finalResponse = "ข้อมูลส่วนนี้ใน Big Data ยังกระจัดกระจายอยู่ แต่เท่าที่ผมวิเคราะห์คือมันน่าสนใจมากครับ คุณโตนัสอยากให้ผมลองเจาะลึกส่วนไหนเพิ่มไหมอ่ะน้า?";
                logTrace("BIG_DATA_EMPTY: HEURISTIC_FALLBACK");
            }
        } catch (err) {
            finalResponse = "ขออภัยครับคุณโตนัส ระบบเชื่อมต่ออินเทอร์เน็ตขัดข้อง แต่ผมยังรอคำสั่งอื่นอยู่นะ!";
            logTrace("NET_ERROR: CONNECTION_REFUSED");
        }
    }

    // Display Result
    setTimeout(() => {
        addChat(finalResponse, 'ai');
        star.classList.remove('processing');
        logTrace("IDLE: WAITING_FOR_INPUT");
    }, 1000);
}

function addChat(text, role) {
    const stream = document.getElementById('chat-stream');
    const div = document.createElement('div');
    div.className = `flex ${role === 'user' ? 'justify-end' : 'justify-start'} animate-all duration-500`;
    
    const content = document.createElement('div');
    content.className = role === 'user' 
        ? 'bg-blue-600 text-white p-4 px-6 rounded-3xl rounded-tr-none max-w-[80%] shadow-lg' 
        : 'ai-bubble p-6 rounded-3xl rounded-tl-none max-w-[90%] text-gray-200';
    
    content.innerHTML = text;
    div.appendChild(content);
    stream.appendChild(div);
    stream.scrollTop = stream.scrollHeight;
}

function logTrace(msg) {
    const el = document.getElementById('trace-log');
    el.innerHTML = `> ${msg}<br>` + el.innerHTML;
}
</script>
</body>
</html>
