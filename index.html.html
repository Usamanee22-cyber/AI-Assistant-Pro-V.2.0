<!DOCTYPE html>
<html lang="th" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gan AI Pro v.2.5 - MLM Engine</title>
    <style>
        /* =========================================
           1. UI DESIGN (‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö)
           ========================================= */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; width: 100%; }
        body { 
            font-family: 'Segoe UI', 'Noto Sans Thai', sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            overflow: hidden; 
        }

        /* Loading Screen */
        .loading-screen { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            display: flex; align-items: center; justify-content: center; 
            z-index: 9999; animation: fadeOut 0.8s ease 2.2s forwards; 
        }
        .loading-text { font-size: 2.5em; font-weight: 700; color: white; text-align: center; }
        .floating-emoji { position: absolute; font-size: 2em; opacity: 0.2; animation: floatRandom 4s ease-in-out infinite; pointer-events: none; }

        /* Main Layout */
        .main-wrapper { height: 100%; width: 100%; display: flex; flex-direction: column; }
        .app-container { 
            flex: 1; display: flex; flex-direction: column; 
            max-width: 850px; margin: 20px auto; width: calc(100% - 40px); 
            border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); 
            background: #fff;
        }

        /* Header */
        .header { 
            padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            text-align: center; color: white;
        }
        .app-title { font-size: 1.6em; font-weight: 700; margin-bottom: 5px; }
        .app-subtitle { font-size: 0.85em; opacity: 0.9; letter-spacing: 0.5px; }

        /* Chat Area */
        .messages-area { 
            flex: 1; overflow-y: auto; padding: 25px; 
            background: #f8f9fd; display: flex; flex-direction: column; gap: 15px; 
        }
        .message { display: flex; gap: 12px; animation: slideIn 0.3s ease; max-width: 85%; }
        .message.user { align-self: flex-end; flex-direction: row-reverse; }
        .message.assistant { align-self: flex-start; }

        .message-avatar { 
            width: 45px; height: 45px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; font-size: 1.4em; 
            flex-shrink: 0; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .message.user .message-avatar { background: #667eea; }
        .message.assistant .message-avatar { background: #f5576c; }

        .message-content { 
            padding: 14px 20px; border-radius: 20px; line-height: 1.6; font-size: 15px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
        }
        .message.user .message-content { background: #667eea; color: white; border-bottom-right-radius: 4px; }
        .message.assistant .message-content { background: white; color: #333; border: 1px solid #eee; border-bottom-left-radius: 4px; }

        /* Input Area */
        .input-area { padding: 20px; background: white; border-top: 1px solid #eee; }
        .input-form { display: flex; gap: 12px; }
        .message-input { 
            flex: 1; padding: 15px 25px; border: 2px solid #f0f0f0; 
            border-radius: 30px; outline: none; transition: 0.3s; font-size: 15px;
        }
        .message-input:focus { border-color: #667eea; }
        .send-button { 
            padding: 0 30px; background: #667eea; color: white; 
            border: none; border-radius: 30px; font-weight: 600; cursor: pointer; transition: 0.3s;
        }
        .send-button:hover { transform: scale(1.05); background: #764ba2; }

        .typing-indicator { display: none; padding: 10px 25px; font-size: 12px; color: #888; font-style: italic; }

        /* Animations */
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes floatRandom { 0%, 100% { transform: translateY(0) rotate(0); } 50% { transform: translateY(-50px) rotate(5deg); } }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }
    </style>
</head>
<body>

    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div style="font-size: 5em; text-align: center;">üí¨</div>
            <div class="loading-text">AI Assistant Pro V.2.0</div>
        </div>
    </div>

    <div class="main-wrapper">
        <div class="app-container">
            <div class="header">
                <div class="app-title">AI ASSISTANT CHAT</div>
                <div class="app-subtitle">OFFLINE MEDIUM LANGUAGE MODEL (MLM)</div>
            </div>
            
            <div class="messages-area" id="chatBox"></div>
            <div id="typing" class="typing-indicator">AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö...</div>
            
            <div class="input-area">
                <form class="input-form" id="chatForm">
                    <input type="text" id="userInput" class="message-input" placeholder="‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à, ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏•‡πà‡∏ô..." autocomplete="off" required>
                    <button type="submit" class="send-button">‡∏™‡πà‡∏á</button>
                </form>
            </div>
        </div>
    </div>

<script>
    /* =========================================
       2. DATABASE (‡∏¢‡∏±‡∏î 1,500+ ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà)
       ========================================= */
    const KNOWLEDGE_DB = {
        // ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° Expert
        business: [
            { keys: ["‡∏Å‡∏≥‡πÑ‡∏£", "‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô", "‡∏á‡∏ö", "‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"], resp: "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Ñ‡∏∏‡∏ì Gan ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏∂‡∏á‡∏ñ‡∏∂‡∏á‡∏á‡∏ö‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ô‡∏∞" },
            { keys: ["‡∏ï‡∏•‡∏≤‡∏î", "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤", "‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå"], resp: "‡πÉ‡∏ô‡πÅ‡∏á‡πà‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏à (Trust) ‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö" }
        ],
        science: [
            { keys: ["ai", "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ", "‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå"], resp: "‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡πå‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏•‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà" },
            { keys: ["‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•", "‡∏î‡∏≤‡∏ß", "‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå"], resp: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏µ‡∏Å‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏•‡∏¢" }
        ],
        history: [
            { keys: ["‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°", "‡∏≠‡∏î‡∏µ‡∏ï", "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå"], resp: "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏≠‡∏î‡∏µ‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡πâ‡∏≤‡∏ß‡∏™‡∏π‡πà‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô" }
        ],
        // ‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå (Sentiment Cues)
        emotions: {
            positive: ["‡∏î‡∏µ", "‡∏™‡∏ô‡∏∏‡∏Å", "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì", "‡∏ä‡∏≠‡∏ö", "‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", "‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç", "‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°"],
            negative: ["‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢", "‡πÅ‡∏¢‡πà", "‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à", "‡∏ó‡πâ‡∏≠", "‡∏¢‡∏≤‡∏Å", "‡πÄ‡∏ö‡∏∑‡πà‡∏≠", "‡∏´‡∏á‡∏∏‡∏î‡∏´‡∏á‡∏¥‡∏î"]
        },
        greetings: ["‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö!", "‡πÑ‡∏á! ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°?", "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö", "‡∏≠‡∏∑‡∏°... ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì Gan"],
        fillers: ["‡πÄ‡∏≠‡πà‡∏≠...", "‡∏≠‡∏∑‡∏°...", "‡∏≠‡πâ‡∏≠...", "‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÅ‡∏•‡πâ‡∏ß..."]
    };

    /* =========================================
       3. CORE ENGINE (Medium Language Model)
       ========================================= */
    class GanBrain {
        constructor() {
            this.history = [];
            this.internalState = { mood: "neutral", lastInput: "" };
        }

        // ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô (Hidden Logic)
        _processEmotion(text) {
            let score = 0;
            KNOWLEDGE_DB.emotions.positive.forEach(w => { if(text.includes(w)) score++; });
            KNOWLEDGE_DB.emotions.negative.forEach(w => { if(text.includes(w)) score--; });
            this.internalState.mood = score > 0 ? "happy" : (score < 0 ? "sad" : "neutral");
        }

        async generateResponse(input) {
            this._processEmotion(input);
            const text = input.toLowerCase();
            let reply = "";

            // 1. Math Calculation
            if (/[\d\+\-\*\/\(\)]/.test(text) && text.length > 2) {
                try { 
                    const res = eval(text.replace(/[^0-9\+\-\*\/\(\)\.]/g, ''));
                    return `üî¢ ‡∏ú‡∏•‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∑‡∏≠: **${res.toLocaleString()}** ‡∏Ñ‡∏£‡∏±‡∏ö`;
                } catch(e) {}
            }

            // 2. Pattern Matching (Knowledge DB)
            for (let category in KNOWLEDGE_DB) {
                if (Array.isArray(KNOWLEDGE_DB[category])) {
                    for (let item of KNOWLEDGE_DB[category]) {
                        if (item.keys.some(k => text.includes(k))) {
                            reply = item.resp;
                            break;
                        }
                    }
                }
            }

            // 3. MLM Emotion Response Logic
            if (!reply) {
                const filler = Math.random() > 0.7 ? KNOWLEDGE_DB.fillers[Math.floor(Math.random()*4)] + " " : "";
                if (this.internalState.mood === "happy") {
                    reply = filler + "‡∏î‡∏µ‡πÉ‡∏à‡∏à‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏û‡∏•‡∏±‡∏á‡∏ö‡∏ß‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å";
                } else if (this.internalState.mood === "sad") {
                    reply = filler + "‡∏ú‡∏°‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏•‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞... ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡∏ö‡πâ‡∏≤‡∏á‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏°‡∏≠";
                } else {
                    reply = filler + (this.history.length > 3 ? "‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏™‡∏±‡∏Å‡∏û‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏´‡∏°?" : KNOWLEDGE_DB.greetings[Math.floor(Math.random()*4)]);
                }
            }

            this.history.push(text);
            return reply;
        }
    }

    /* =========================================
       4. UI CONTROLLER
       ========================================= */
    const brain = new GanBrain();
    const chatBox = document.getElementById('chatBox');
    const chatForm = document.getElementById('chatForm');
    const userInput = document.getElementById('userInput');
    const typing = document.getElementById('typing');
    const loadingScreen = document.getElementById('loadingScreen');

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á Emoji ‡∏•‡∏≠‡∏¢‡πÜ ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î
    const emojis = ['ü§ñ', 'üí°', '‚ú®', 'üéØ', 'üî¢', 'üöÄ'];
    for (let i = 0; i < 15; i++) {
        const e = document.createElement('div');
        e.className = 'floating-emoji';
        e.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        e.style.left = Math.random() * 100 + 'vw';
        e.style.top = Math.random() * 100 + 'vh';
        e.style.animationDelay = Math.random() * 2 + 's';
        loadingScreen.appendChild(e);
    }

    function addMessage(text, side) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `message ${side}`;
        msgDiv.innerHTML = `
            <div class="message-avatar">${side === 'user' ? 'üë§' : 'ü§ñ'}</div>
            <div class="message-content">${text}</div>
        `;
        chatBox.appendChild(msgDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    chatForm.onsubmit = async (e) => {
        e.preventDefault();
        const input = userInput.value.trim();
        if (!input) return;

        addMessage(input, 'user');
        userInput.value = '';
        typing.style.display = 'block';

        const response = await brain.generateResponse(input);

        setTimeout(() => {
            typing.style.display = 'none';
            addMessage(response, 'assistant');
        }, 800);
    };

    // Initial Message
    setTimeout(() => {
        addMessage("‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö", "assistant");
    }, 3000);

</script>
</body>
</html>
