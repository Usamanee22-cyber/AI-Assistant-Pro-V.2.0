<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Monolith-V62-Pure-Logic-Graph</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Noto Sans Thai', sans-serif; }
        body { background: #010409; height: 100vh; display: flex; align-items: center; justify-content: center; }
        .master-core { background: #ffffff; width: 98%; max-width: 1500px; height: 95vh; border-radius: 40px; display: grid; grid-template-columns: 1fr 400px; overflow: hidden; }
        #viewport { flex: 1; overflow-y: auto; padding: 40px; background: #fcfdfe; display: flex; flex-direction: column; gap: 15px; }
        
        /* Graph Styling */
        .graph-container { background: #111827; border-radius: 20px; padding: 20px; position: relative; height: 250px; }
        .graph-line { fill: none; stroke: #3b82f6; stroke-width: 3; stroke-linecap: round; transition: all 0.5s ease; }
        .graph-area { fill: rgba(59, 130, 246, 0.1); transition: all 0.5s ease; }
        
        .bubble { width: fit-content; max-width: 85%; padding: 18px 25px; border-radius: 25px; font-size: 18px; }
        .assistant .bubble { background: white; border: 1px solid #e2e8f0; color: #334155; }
        .user .bubble { background: #1e293b; color: white; margin-left: auto; }
    </style>
</head>
<body>
    <div class="master-core">
        <div class="flex flex-direction-column border-r h-full overflow-hidden" style="display:flex; flex-direction:column;">
            <header class="p-8 border-b font-black text-2xl uppercase">Lange-Model <span class="text-blue-600">V62.0</span> <small class="text-[10px] block opacity-50">Pure SVG Logic - No Libraries</small></header>
            <main id="viewport"><div id="chatFlow"></div></main>
            <footer class="p-8 border-t">
                <form id="actionForm" class="flex gap-4 bg-slate-100 p-2 rounded-full border-2 border-transparent focus-within:border-blue-600">
                    <input type="text" id="userInput" placeholder="ป้อนข้อมูลเพื่อขยับกราฟความฉลาด..." class="flex-1 bg-transparent outline-none px-10 font-bold text-xl">
                    <button type="submit" class="bg-blue-600 text-white px-10 py-4 rounded-full font-black">TRAIN</button>
                </form>
            </footer>
        </div>

        <aside class="p-8 bg-slate-50 flex flex-col gap-6">
            <h2 class="font-black text-xl uppercase tracking-widest text-slate-800">Neural Monitor</h2>
            
            <div class="graph-container">
                <p class="text-[10px] text-blue-400 font-bold mb-4 uppercase">Training Loss (Pure SVG)</p>
                <svg id="svgGraph" width="100%" height="180" viewBox="0 0 400 200" preserveAspectRatio="none">
                    <path id="graphPathArea" class="graph-area"></path>
                    <path id="graphPathLine" class="graph-line"></path>
                </svg>
            </div>

            <div class="bg-white p-6 rounded-3xl shadow-sm flex-1 overflow-y-auto">
                <p class="text-[10px] font-black text-slate-400 mb-4 uppercase">Training Logs (Pillar 15)</p>
                <div id="logs" class="text-xs space-y-3 font-bold text-slate-600"></div>
            </div>
        </aside>
    </div>

<script>
class PureLangeEngine {
    constructor() {
        this.losses = [180, 150, 130]; // ค่า Y เริ่มต้น (ยิ่งสูงคือ Loss ยิ่งเยอะในพิกัด SVG)
        this.inputs = ["Initial System Boot"];
        this.updateGraph();
    }

    updateGraph() {
        const line = document.getElementById('graphPathLine');
        const area = document.getElementById('graphPathArea');
        const widthPerStep = 400 / (this.losses.length - 1);
        
        let d = `M 0 ${this.losses[0]}`; // จุดเริ่ม
        for (let i = 1; i < this.losses.length; i++) {
            d += ` L ${i * widthPerStep} ${this.losses[i]}`;
        }
        
        line.setAttribute('d', d);
        area.setAttribute('d', d + ` L ${(this.losses.length-1) * widthPerStep} 200 L 0 200 Z`);
    }

    train(text) {
        // [Logic] ยิ่งพิมพ์ Loss ยิ่งลดลง (ตัวเลข Y ใน SVG จะต่ำลงเรื่อยๆ จนเกือบ 0)
        const lastLoss = this.losses[this.losses.length - 1];
        const newLoss = Math.max(10, lastLoss - (Math.random() * 15 + 5)); // ลดลงเรื่อยๆ แต่ไม่ต่ำกว่า 10
        
        this.losses.push(newLoss);
        this.inputs.push(text);
        this.updateGraph();

        // Update Logs
        const logs = document.getElementById('logs');
        logs.innerHTML = this.inputs.map(i => `<p class="border-b pb-2">> ${i}</p>`).reverse().join('');

        return `[Lange-Model] เทรนสำเร็จ! ค่า Loss ปัจจุบัน: ${(newLoss/2).toFixed(2)}% เส้นกราฟ SVG ขยับลงตามความฉลาดที่เพิ่มขึ้นแล้วครับ`;
    }
}

const ai = new PureLangeEngine();
document.getElementById('actionForm').onsubmit = (e) => {
    e.preventDefault();
    const input = document.getElementById('userInput');
    const val = input.value.trim();
    if(!val) return;

    document.getElementById('chatFlow').innerHTML += `<div class="msg-line user"><div class="bubble">${val}</div></div>`;
    const response = ai.train(val);
    
    setTimeout(() => {
        document.getElementById('chatFlow').innerHTML += `<div class="msg-line assistant"><div class="bubble">${response}</div></div>`;
        document.getElementById('viewport').scrollTop = document.getElementById('viewport').scrollHeight;
    }, 400);
    input.value = '';
};
</script>
</body>
</html>
